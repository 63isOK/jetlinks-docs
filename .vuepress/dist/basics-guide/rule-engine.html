<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>jetlinks系统文档</title>
    <meta name="description" content="">
    
    
    <link rel="preload" href="/assets/css/0.styles.6ebfbf8b.css" as="style"><link rel="preload" href="/assets/js/app.dc7074e4.js" as="script"><link rel="preload" href="/assets/js/2.910fdf72.js" as="script"><link rel="preload" href="/assets/js/39.33750cb1.js" as="script"><link rel="prefetch" href="/assets/js/10.eda24268.js"><link rel="prefetch" href="/assets/js/11.19531054.js"><link rel="prefetch" href="/assets/js/12.4eab3e27.js"><link rel="prefetch" href="/assets/js/13.a47f45a1.js"><link rel="prefetch" href="/assets/js/14.3e730a46.js"><link rel="prefetch" href="/assets/js/15.907667c2.js"><link rel="prefetch" href="/assets/js/16.8015f92a.js"><link rel="prefetch" href="/assets/js/17.b5a8d997.js"><link rel="prefetch" href="/assets/js/18.1d62f5d1.js"><link rel="prefetch" href="/assets/js/19.9e6eee02.js"><link rel="prefetch" href="/assets/js/20.26bbcf10.js"><link rel="prefetch" href="/assets/js/21.e0709ae7.js"><link rel="prefetch" href="/assets/js/22.ce25e9cd.js"><link rel="prefetch" href="/assets/js/23.169aa2b6.js"><link rel="prefetch" href="/assets/js/24.8bd84257.js"><link rel="prefetch" href="/assets/js/25.d591de57.js"><link rel="prefetch" href="/assets/js/26.9df4e7f5.js"><link rel="prefetch" href="/assets/js/27.0b93dd99.js"><link rel="prefetch" href="/assets/js/28.93a3408e.js"><link rel="prefetch" href="/assets/js/29.09f1942e.js"><link rel="prefetch" href="/assets/js/3.98eadc90.js"><link rel="prefetch" href="/assets/js/30.cf5724ec.js"><link rel="prefetch" href="/assets/js/31.795834ec.js"><link rel="prefetch" href="/assets/js/32.624235db.js"><link rel="prefetch" href="/assets/js/33.396cc821.js"><link rel="prefetch" href="/assets/js/34.d98c87d8.js"><link rel="prefetch" href="/assets/js/35.f43eb095.js"><link rel="prefetch" href="/assets/js/36.113e2390.js"><link rel="prefetch" href="/assets/js/37.8e34b117.js"><link rel="prefetch" href="/assets/js/38.521e74ad.js"><link rel="prefetch" href="/assets/js/4.4d6e2213.js"><link rel="prefetch" href="/assets/js/40.9c2067e2.js"><link rel="prefetch" href="/assets/js/41.da1c1528.js"><link rel="prefetch" href="/assets/js/42.a86acc07.js"><link rel="prefetch" href="/assets/js/43.01ac982b.js"><link rel="prefetch" href="/assets/js/44.b29351ad.js"><link rel="prefetch" href="/assets/js/45.02dee7fb.js"><link rel="prefetch" href="/assets/js/46.31030732.js"><link rel="prefetch" href="/assets/js/47.d886bd46.js"><link rel="prefetch" href="/assets/js/48.2dafc81e.js"><link rel="prefetch" href="/assets/js/49.3cf2fd42.js"><link rel="prefetch" href="/assets/js/5.d9fe38f8.js"><link rel="prefetch" href="/assets/js/50.9e3340e3.js"><link rel="prefetch" href="/assets/js/51.f9bbad75.js"><link rel="prefetch" href="/assets/js/52.f3090553.js"><link rel="prefetch" href="/assets/js/53.131e43b9.js"><link rel="prefetch" href="/assets/js/54.4af39627.js"><link rel="prefetch" href="/assets/js/55.332d5b71.js"><link rel="prefetch" href="/assets/js/56.468bb25a.js"><link rel="prefetch" href="/assets/js/57.5d23ec09.js"><link rel="prefetch" href="/assets/js/58.dbd31fff.js"><link rel="prefetch" href="/assets/js/59.52e0a5d6.js"><link rel="prefetch" href="/assets/js/6.e424fcf7.js"><link rel="prefetch" href="/assets/js/60.0adfc4b5.js"><link rel="prefetch" href="/assets/js/61.96074a66.js"><link rel="prefetch" href="/assets/js/62.7e859261.js"><link rel="prefetch" href="/assets/js/63.9503838f.js"><link rel="prefetch" href="/assets/js/64.04473a5c.js"><link rel="prefetch" href="/assets/js/65.6d5e6369.js"><link rel="prefetch" href="/assets/js/66.bebba830.js"><link rel="prefetch" href="/assets/js/7.078c9f18.js"><link rel="prefetch" href="/assets/js/8.616a6961.js"><link rel="prefetch" href="/assets/js/9.ba1a0650.js">
    <link rel="stylesheet" href="/assets/css/0.styles.6ebfbf8b.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">jetlinks系统文档</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="http://jetlinks.cn/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  关于
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://github.com/jetlinks" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://gitee.com/jetlinks" target="_blank" rel="noopener noreferrer" class="nav-link external">
  gitee
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://github.com/jetlinks/jetlinks-community/issues" target="_blank" rel="noopener noreferrer" class="nav-link external">
  提交问题
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://github.com/jetlinks/jetlinks-docs/issues" target="_blank" rel="noopener noreferrer" class="nav-link external">
  文档纠错
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="http://jetlinks.cn/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  关于
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://github.com/jetlinks" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://gitee.com/jetlinks" target="_blank" rel="noopener noreferrer" class="nav-link external">
  gitee
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://github.com/jetlinks/jetlinks-community/issues" target="_blank" rel="noopener noreferrer" class="nav-link external">
  提交问题
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://github.com/jetlinks/jetlinks-docs/issues" target="_blank" rel="noopener noreferrer" class="nav-link external">
  文档纠错
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>基础</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/basics-guide/course/introduction.html" class="sidebar-link">介绍</a></li><li><a href="/basics-guide/quick-start.html" class="sidebar-link">快速开始</a></li><li><a href="/basics-guide/course/system-layout.html" class="sidebar-link">系统配置</a></li><li><a href="/basics-guide/device-manager.html" class="sidebar-link">设备管理</a></li><li><a href="/basics-guide/course/network.html" class="sidebar-link">网络组件</a></li><li><a href="/basics-guide/course/notification.html" class="sidebar-link">通知管理</a></li><li><a href="/basics-guide/course/rule-engine.html" class="sidebar-link">规则引擎</a></li><li><a href="/basics-guide/course/logger.html" class="sidebar-link">日志管理</a></li><li><a href="/basics-guide/course/data-visualization.html" class="sidebar-link">数据可视化(Pro)</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>进阶</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/advancement-guide/jetlinks-protocol.html" class="sidebar-link">JetLinks官方协议说明</a></li><li><a href="/basics-guide/protocol-support.html" class="sidebar-link">平台统一消息说明</a></li><li><a href="/advancement-guide/mqtt-connection.html" class="sidebar-link">使用MQTT服务网关接入设备</a></li><li><a href="/advancement-guide/third-mqtt.html" class="sidebar-link">通过第三方MQTT服务接入设备</a></li><li><a href="/advancement-guide/tcp-connection.html" class="sidebar-link">使用TCP服务网关接入设备</a></li><li><a href="/advancement-guide/children-device.html" class="sidebar-link">接入网关设备,并通过网关代理接入子设备</a></li><li><a href="/advancement-guide/rule-engine-subscription.html" class="sidebar-link">通过规则引擎订阅设备消息,处理后发送邮件通知</a></li><li><a href="/advancement-guide/rule-engine-send.html" class="sidebar-link">通过规则引擎向其他设备发送消息</a></li><li><a href="/advancement-guide/create-data-visualization.html" class="sidebar-link">创建可视化图表,实时展示设备属性变更(PRO)</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>开发</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/dev-guide/start.html" class="sidebar-link">介绍</a></li><li><a href="/dev-guide/specification.html" class="sidebar-link">规范</a></li><li><a href="/dev-guide/reactor.html" class="sidebar-link">响应式</a></li><li><a href="/dev-guide/crud.html" class="sidebar-link">增删改查</a></li><li><a href="/dev-guide/event-driver.html" class="sidebar-link">事件驱动之消息网关</a></li><li><a href="/dev-guide/custom-message-protocol.html" class="sidebar-link">自定义消息协议</a></li><li><a href="/dev-guide/custom-notification-component.html" class="sidebar-link">自定义通知组件</a></li><li><a href="/dev-guide/send-message.html" class="sidebar-link">向设备发送消息</a></li><li><a href="/dev-guide/custom-dashboard.html" class="sidebar-link">自定义仪表盘</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>常见问题</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/common-problems/install.html" class="sidebar-link">安装,启动常见问题</a></li><li><a href="/common-problems/network-components.html" class="sidebar-link">网络组件常见问题</a></li><li><a href="/common-problems/mqtt-connection.html" class="sidebar-link">使用MQTT接入时的常见问题</a></li><li><a href="/common-problems/tcp-network-components.html" class="sidebar-link">TCP网络组件常见问题</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>HTTP接口文档</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/interface-guide/authentication.html" class="sidebar-link">权限设置</a></li><li><a href="/interface-guide/device/device-product.html" class="sidebar-link">设备型号</a></li><li><a href="/interface-guide/device/device-instance.html" class="sidebar-link">设备实例</a></li><li><a href="/" class="sidebar-link">网络组件</a></li><li><a href="/" class="sidebar-link">设备接入</a></li><li><a href="/" class="sidebar-link">消息通知</a></li><li><a href="/" class="sidebar-link">openApi</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><p><strong>Table of Contents</strong> <em>generated with <a href="https://github.com/thlorenz/doctoc" target="_blank" rel="noopener noreferrer">DocToc<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></em></p> <ul><li><a href="#%e8%a7%84%e5%88%99%e5%bc%95%e6%93%8e">规则引擎</a> <ul><li><a href="#%e8%a7%84%e5%88%99%e6%a8%a1%e5%9e%8b">规则模型</a> <ul><li><a href="#%e8%a7%84%e5%88%99%e8%8a%82%e7%82%b9">规则节点</a></li> <li><a href="#%e8%be%93%e5%85%a5%e8%be%93%e5%87%ba">输入输出</a></li> <li><a href="#%e8%bf%9e%e7%ba%bf">连线</a></li> <li><a href="#%e8%b0%83%e8%af%95">调试</a></li></ul></li> <li><a href="#%e8%a7%84%e5%88%99%e5%ae%9e%e4%be%8b">规则实例</a> <ul><li><a href="#%e5%90%af%e5%8a%a8">启动</a></li> <li><a href="#%e5%81%9c%e6%ad%a2">停止</a></li> <li><a href="#%e6%89%a7%e8%a1%8c">执行</a></li></ul></li></ul></li> <li><a href="#%e8%8a%82%e7%82%b9%e6%94%af%e6%8c%81">节点支持</a> <ul><li><a href="#%e5%ae%9a%e6%97%b6%e4%bb%bb%e5%8a%a1">定时任务</a> <ul><li><a href="#%e5%ae%9a%e6%97%b6%e5%99%a8%e9%85%8d%e7%bd%ae%e9%a1%b9">定时器配置项</a></li></ul></li> <li><a href="#%e9%80%9a%e7%9f%a5">通知</a> <ul><li><a href="#%e5%8f%82%e6%95%b0%e8%af%b4%e6%98%8e">参数说明</a></li></ul></li> <li><a href="#%e8%b7%af%e7%94%b1">路由</a></li> <li><a href="#%e6%b6%88%e6%81%af%e7%bd%91%e5%85%b3">消息网关</a> <ul><li><a href="#%e6%b6%88%e6%81%af%e7%bd%91%e5%85%b3%e9%85%8d%e7%bd%ae%e9%a1%b9">消息网关配置项</a></li> <li><a href="#%e5%b8%b8%e7%94%a8topic">常用topic</a></li></ul></li> <li><a href="#mqtt%e5%ae%a2%e6%88%b7%e7%ab%af">MQTT客户端</a> <ul><li><a href="#mqtt%e5%ae%a2%e6%88%b7%e7%ab%af%e9%85%8d%e7%bd%ae%e9%a1%b9">MQTT客户端配置项</a></li> <li><a href="#mqtt%e5%ae%a2%e6%88%b7%e7%ab%af%e5%86%85%e7%bd%ae%e5%8f%98%e9%87%8f">MQTT客户端内置变量</a></li></ul></li> <li><a href="#tcp%e5%ae%a2%e6%88%b7%e7%ab%af">TCP客户端</a> <ul><li><a href="#tcp%e5%ae%a2%e6%88%b7%e7%ab%af%e9%85%8d%e7%bd%ae%e9%a1%b9">TCP客户端配置项</a> <ul><li><a href="#tcp%e5%ae%a2%e6%88%b7%e7%ab%af%e5%86%85%e7%bd%ae%e5%8f%98%e9%87%8f">TCP客户端内置变量</a></li></ul></li></ul></li> <li><a href="#websocket%e5%ae%a2%e6%88%b7%e7%ab%af">WebSocket客户端</a> <ul><li><a href="#websocket%e5%ae%a2%e6%88%b7%e7%ab%af%e5%8f%82%e6%95%b0%e8%af%b4%e6%98%8e">WebSocket客户端参数说明</a></li> <li><a href="#websocket%e5%ae%a2%e6%88%b7%e7%ab%af%e5%86%85%e7%bd%ae%e5%8f%98%e9%87%8f">WebSocket客户端内置变量</a></li></ul></li> <li><a href="#http%e5%ae%a2%e6%88%b7%e7%ab%af">HTTP客户端</a> <ul><li><a href="#http%e5%ae%a2%e6%88%b7%e7%ab%af%e5%8f%82%e6%95%b0%e8%af%b4%e6%98%8e">HTTP客户端参数说明</a></li> <li><a href="#http%e5%ae%a2%e6%88%b7%e7%ab%af%e5%86%85%e7%bd%ae%e5%8f%98%e9%87%8f">HTTP客户端内置变量</a></li></ul></li> <li><a href="#coap%e5%ae%a2%e6%88%b7%e7%ab%af">CoAP客户端</a> <ul><li><a href="#coap%e5%ae%a2%e6%88%b7%e7%ab%af%e5%8f%82%e6%95%b0%e8%af%b4%e6%98%8e">CoAP客户端参数说明</a></li> <li><a href="#coap%e5%ae%a2%e6%88%b7%e7%ab%af%e5%86%85%e7%bd%ae%e5%8f%98%e9%87%8f">CoAP客户端内置变量</a></li></ul></li> <li><a href="#%e6%89%a7%e8%a1%8csql">执行SQL</a> <ul><li><a href="#%e6%89%a7%e8%a1%8csql%e9%85%8d%e7%bd%ae%e9%a1%b9">执行SQL配置项</a></li> <li><a href="#%e6%89%a7%e8%a1%8csql%e8%af%b4%e6%98%8e">执行SQL说明</a></li></ul></li> <li><a href="#%e5%ad%97%e6%ae%b5%e8%bd%ac%e6%8d%a2">字段转换</a> <ul><li><a href="#%e5%ad%97%e6%ae%b5%e8%bd%ac%e6%8d%a2%e9%85%8d%e7%bd%ae%e9%a1%b9">字段转换配置项</a></li></ul></li> <li><a href="#%e5%8a%a8%e6%80%81%e8%84%9a%e6%9c%ac">动态脚本</a> <ul><li><a href="#%e5%8a%a8%e6%80%81%e8%84%9a%e6%9c%ac%e9%85%8d%e7%bd%ae%e9%a1%b9">动态脚本配置项</a> <ul><li><a href="#%e8%84%9a%e6%9c%ac%e6%a1%88%e4%be%8b">脚本案例</a></li></ul></li></ul></li></ul></li></ul> <h1 id="规则引擎"><a href="#规则引擎" class="header-anchor">#</a> 规则引擎</h1> <p>提供可视化,流程化的数据(逻辑)处理工具.</p> <h2 id="规则模型"><a href="#规则模型" class="header-anchor">#</a> 规则模型</h2> <p>新建规则模型</p> <ul><li>登录物联网管理平台。</li> <li>选择左侧导航栏，选择规则引擎 &gt; 规则模型。</li> <li>在规则模型板块中，单击<code>新建模型</code>操作按钮。</li> <li>在弹出设计器中，拖拽节点和连线生成相应规则，填写模型id和名称点击<code>保存</code>。</li> <li>规则模型提供配置的导出、导入（支持批量导入）、复制功能</li></ul> <p><img src="images/rule-engine/new-rule-model.gif" alt="新建规则模型"></p> <h3 id="规则节点"><a href="#规则节点" class="header-anchor">#</a> 规则节点</h3> <ul><li>数据的处理逻辑由规则节点执行. 不同的节点类型需要不同的配置.</li> <li>节点就像一个java方法,接收上一个节点的参数,处理之后输出到下一个节点.</li> <li>节点之间使用<code>连线</code>进行连接,组成一个完整到流程.</li> <li>节点可以不接收数据,只生产数据.如: <code>定时任务</code>,<code>消息网关</code>.</li> <li>节点可分布在不同的服务器上执行(专业版支持).</li></ul> <h3 id="输入输出"><a href="#输入输出" class="header-anchor">#</a> 输入输出</h3> <p>规则节点的输入和输出数据均为<code>RuleData</code>格式为:</p> <div class="language-json extra-class"><pre class="language-json"><code>    <span class="token punctuation">{</span>
        <span class="token property">&quot;data&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token comment">//输入参数或者输出结果</span>
        <span class="token property">&quot;attributes&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token comment">//拓展属性,通常用于传递节点产生的特殊变量,如异常信息等.</span>
    <span class="token punctuation">}</span>
</code></pre></div><p>在一些节点里,会将<code>RuleData</code>转为内置变量以进行一些自定义操作,比如脚本执行,表达式判断等.
通常情况下,内置变量与<code>RuleData</code>格式一致.例如:</p> <p>上一节点输出<code>RuleData.data</code>为<code>{&quot;username&quot;:&quot;admin&quot;,&quot;password&quot;:&quot;m123&quot;}</code>
内置变量会被转为<code>Map</code>,变成:</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;attr&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment">//attributes的简写</span>
    <span class="token property">&quot;data&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span>
        <span class="token property">&quot;username&quot;</span><span class="token operator">:</span><span class="token string">&quot;admin&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;password&quot;</span><span class="token operator">:</span><span class="token string">&quot;m123&quot;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token property">&quot;username&quot;</span><span class="token operator">:</span><span class="token string">&quot;admin&quot;</span><span class="token punctuation">,</span> <span class="token comment">//data里的数据被平铺里</span>
    <span class="token property">&quot;password&quot;</span><span class="token operator">:</span><span class="token string">&quot;m123&quot;</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="custom-block tip"><p class="custom-block-title">注意</p> <p>在规则引擎节点中,大部分表达式使用的是<code>SpEL表达式</code>,所以要注意引用内置变量的方式为: <code>${#data[username]}</code> 而不是<code>${#data.username}</code>.</p></div> <h3 id="连线"><a href="#连线" class="header-anchor">#</a> 连线</h3> <p>节点之间通过<code>连线</code>连接，<code>连线</code>保证多个节点连续执行和有序执行.连线类型分为: <code>连接</code>和<code>事件</code>.</p> <p><code>连接</code>表示当上一个节点输出数据后,数据会流入下一个节点.
<code>事件</code>表示当上一个节点触发一下事件时,数据才会流入下一个节点.</p> <p><code>连线</code>可以指定条件,当满足条件表达式时,数据才会流入下一个节点. 条件表达式为<code>javascript</code>. 表达式返回<code>true</code>则表示满足条件.</p> <h3 id="调试"><a href="#调试" class="header-anchor">#</a> 调试</h3> <p>TODO</p> <h2 id="规则实例"><a href="#规则实例" class="header-anchor">#</a> 规则实例</h2> <p>TODO</p> <h3 id="启动"><a href="#启动" class="header-anchor">#</a> 启动</h3> <p>TODO</p> <h3 id="停止"><a href="#停止" class="header-anchor">#</a> 停止</h3> <p>TODO</p> <h3 id="执行"><a href="#执行" class="header-anchor">#</a> 执行</h3> <p>TODO</p> <h1 id="节点支持"><a href="#节点支持" class="header-anchor">#</a> 节点支持</h1> <p>通用说明</p> <ul><li>节点会在设计器中展示节点自身所需要的参数表单。</li> <li>每个节点通用的表单参数有 节点ID、节点类型、节点名称、节点大小、节点颜色、调度规则</li> <li>节点ID: 规则模型中每个节点的独立标识（自动生成不可修改）</li> <li>节点类型: 节点所对应的功能类型（自动生成不可修改）</li> <li>节点名称: 节点方块在设计器中所展示的名称</li> <li>节点大小: 节点方块在设计器中的尺寸大小</li> <li>节点颜色: 节点方块在设计器中展示的颜色</li> <li>调度规则: 节点在集群中的哪些主机中运行（专业版支持）。</li></ul> <h2 id="定时任务"><a href="#定时任务" class="header-anchor">#</a> 定时任务</h2> <p>定时任务节点用于需要周期性执行某业务规则。如定时同步数据</p> <h3 id="定时器配置项"><a href="#定时器配置项" class="header-anchor">#</a> 定时器配置项</h3> <table><thead><tr><th>参数</th> <th style="text-align:center;">用途</th> <th style="text-align:center;">是否必须</th> <th style="text-align:center;">用例</th></tr></thead> <tbody><tr><td>cron表达式</td> <td style="text-align:center;">生成定时任务规则</td> <td style="text-align:center;">是</td> <td style="text-align:center;">cron表达式(<a href="http://cron.qqe2.com/" target="_blank" rel="noopener noreferrer">在线cron表达式<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>)</td></tr></tbody></table> <h2 id="通知"><a href="#通知" class="header-anchor">#</a> 通知</h2> <p>通过此节点可调用消息通知组件进行消息发送.</p> <h3 id="参数说明"><a href="#参数说明" class="header-anchor">#</a> 参数说明</h3> <table><thead><tr><th>参数</th> <th style="text-align:center;">用途</th> <th style="text-align:center;">是否必须</th> <th style="text-align:center;">用例</th></tr></thead> <tbody><tr><td>通知类型</td> <td style="text-align:center;">设置通知类型</td> <td style="text-align:center;">是</td> <td style="text-align:center;">短信通知</td></tr> <tr><td>通知器</td> <td style="text-align:center;">设置通知类型对应的配置</td> <td style="text-align:center;">是</td> <td style="text-align:center;">选择通知器</td></tr> <tr><td>通知模板</td> <td style="text-align:center;">设置通知需要发送的内容</td> <td style="text-align:center;">是</td> <td style="text-align:center;">选择通知模板</td></tr></tbody></table> <div class="custom-block tip"><p class="custom-block-title">注意</p> <p>在通知模版中可使用规则引擎节点的内置变量,具体是否支持需要看通知器实现是否支持.</p></div> <h2 id="路由"><a href="#路由" class="header-anchor">#</a> 路由</h2> <p>路由节点将数据转发到多个节点,通过连线条件可实现同一个数据进行不同的处理逻辑.</p> <h2 id="消息网关"><a href="#消息网关" class="header-anchor">#</a> 消息网关</h2> <p>消息网关为平台内部的一个<code>消息总线</code>,统称<code>消息网关</code>,是一个基于<code>topic</code>实现消息的消息订阅与发布功能.通常用于订阅设备消息,进行处理.</p> <div class="custom-block tip"><p class="custom-block-title">注意</p> <p>topic是一个以/分割的字符,与MQTT的topic类似. 支持通配符<code>**</code>和<code>*</code>,
例如: <code>/device/*/online</code> 表示所有的设备上线消息. <code>/device/**</code>表示所有设备的所有消息.</p> <p>注意: 通配符不支持前后匹配. 例如<code>/device/dev*/</code> 是不支持的.</p></div> <h3 id="消息网关配置项"><a href="#消息网关配置项" class="header-anchor">#</a> 消息网关配置项</h3> <table><thead><tr><th>参数</th> <th style="text-align:center;">用途</th> <th style="text-align:center;">是否必须</th> <th style="text-align:center;">用例</th></tr></thead> <tbody><tr><td>网关</td> <td style="text-align:center;">选择要订阅的网关</td> <td style="text-align:center;">是</td> <td style="text-align:center;">默认网关</td></tr> <tr><td>类型</td> <td style="text-align:center;">设置推送消息还是订阅消息</td> <td style="text-align:center;">是</td> <td style="text-align:center;">订阅消息</td></tr> <tr><td>Topic</td> <td style="text-align:center;">订阅主题,多个主题使用逗号(,)分割</td> <td style="text-align:center;">是</td> <td style="text-align:center;">/device/**</td></tr></tbody></table> <h3 id="常用topic"><a href="#常用topic" class="header-anchor">#</a> 常用topic</h3> <p>不同的Topic返回的消息格式不同,具体格式请查看对用topic定义文档.</p> <ul><li>设备消息Topic (TODO)</li></ul> <h2 id="mqtt客户端"><a href="#mqtt客户端" class="header-anchor">#</a> MQTT客户端</h2> <p>该节点使用网络组件中的Mqtt客户端进行消息订阅和消息推送。
可使用此功能,将消息处理后通知给第三方MQTT服务.</p> <h3 id="mqtt客户端配置项"><a href="#mqtt客户端配置项" class="header-anchor">#</a> MQTT客户端配置项</h3> <table><thead><tr><th>参数</th> <th style="text-align:center;">用途</th> <th style="text-align:center;">是否必须</th> <th style="text-align:center;">用例</th></tr></thead> <tbody><tr><td>mqtt客户端</td> <td style="text-align:center;">设置客户端基本配置</td> <td style="text-align:center;">是</td> <td style="text-align:center;">选择MQTT客户端</td></tr> <tr><td>操作</td> <td style="text-align:center;">定义mqtt客户端操作类型</td> <td style="text-align:center;">是</td> <td style="text-align:center;">订阅消息</td></tr> <tr><td>消息体类型</td> <td style="text-align:center;">根据不同的类型解析为对应的数据</td> <td style="text-align:center;">是</td> <td style="text-align:center;">JSON</td></tr> <tr><td>主题Topic</td> <td style="text-align:center;">定义推送或订阅消息的主题</td> <td style="text-align:center;">是</td> <td style="text-align:center;">/topic/${#data.id}</td></tr> <tr><td>主题变量</td> <td style="text-align:center;">将把topic中的占位符提取为变量传递到下一个节点(仅订阅生效)</td> <td style="text-align:center;">否</td> <td style="text-align:center;">/{productId}/{deviceId}/event/{eventId}</td></tr></tbody></table> <h3 id="mqtt客户端内置变量"><a href="#mqtt客户端内置变量" class="header-anchor">#</a> MQTT客户端内置变量</h3> <p>推送数据格式(由上一个节点传入):</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;topic&quot;</span><span class="token operator">:</span><span class="token string">&quot;/1/a/event/temp&quot;</span><span class="token punctuation">,</span> <span class="token comment">//可选,如果传递了topic则配置中的topic失效.</span>
    <span class="token property">&quot;payloadType&quot;</span><span class="token operator">:</span><span class="token string">&quot;JSON&quot;</span><span class="token punctuation">,</span><span class="token comment">//可选,如果未设置则以配置项中的为准.</span>
    <span class="token property">&quot;payload&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment">//要推送的消息内容</span>
<span class="token punctuation">}</span>
</code></pre></div><p>订阅数据格式(将传入下一个节点):</p> <div class="language-json extra-class"><pre class="language-json"><code>    <span class="token punctuation">{</span>
        <span class="token property">&quot;topic&quot;</span><span class="token operator">:</span><span class="token string">&quot;/1/a/event/temp&quot;</span><span class="token punctuation">,</span> <span class="token comment">//主题topic</span>
        <span class="token property">&quot;will&quot;</span><span class="token operator">:</span><span class="token boolean">false</span><span class="token punctuation">,</span>
        <span class="token property">&quot;qos&quot;</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span>
        <span class="token property">&quot;dup&quot;</span><span class="token operator">:</span><span class="token boolean">false</span><span class="token punctuation">,</span>
        <span class="token property">&quot;retain&quot;</span><span class="token operator">:</span><span class="token boolean">false</span><span class="token punctuation">,</span>
        <span class="token property">&quot;clientId&quot;</span><span class="token operator">:</span><span class="token string">&quot;客户端Id&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;payloadType&quot;</span><span class="token operator">:</span><span class="token string">&quot;JSON&quot;</span><span class="token punctuation">,</span><span class="token comment">//接收消息类型</span>
        <span class="token property">&quot;payload&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment">//接收的消息内容,不同的消息类型,格式不同</span>
        <span class="token property">&quot;vars&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token comment">//topic占位符变量</span>
            <span class="token property">&quot;productId&quot;</span><span class="token operator">:</span><span class="token string">&quot;型号Id&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;deviceId&quot;</span><span class="token operator">:</span><span class="token string">&quot;设备Id&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;eventId&quot;</span><span class="token operator">:</span><span class="token string">&quot;事件Id&quot;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
</code></pre></div><h2 id="tcp客户端"><a href="#tcp客户端" class="header-anchor">#</a> TCP客户端</h2> <p>该节点使用网络组件中的TCP客户端进行消息订阅和消息推送</p> <h3 id="tcp客户端配置项"><a href="#tcp客户端配置项" class="header-anchor">#</a> TCP客户端配置项</h3> <table><thead><tr><th>参数</th> <th style="text-align:center;">用途</th> <th style="text-align:center;">是否必须</th> <th style="text-align:center;">用例</th></tr></thead> <tbody><tr><td>tcp客户端</td> <td style="text-align:center;">设置客户端基本配置</td> <td style="text-align:center;">是</td> <td style="text-align:center;">弹出框选择</td></tr> <tr><td>操作</td> <td style="text-align:center;">定义tcp客户端操作类型</td> <td style="text-align:center;">是</td> <td style="text-align:center;">订阅消息</td></tr> <tr><td>消息体类型</td> <td style="text-align:center;">订阅或发送消息体类型</td> <td style="text-align:center;">否</td> <td style="text-align:center;">JSON</td></tr></tbody></table> <h4 id="tcp客户端内置变量"><a href="#tcp客户端内置变量" class="header-anchor">#</a> TCP客户端内置变量</h4> <p>推送数据格式(由上一步传入):</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;payloadType&quot;</span><span class="token operator">:</span><span class="token string">&quot;BINARY&quot;</span><span class="token punctuation">,</span><span class="token comment">//消息类型</span>
    <span class="token property">&quot;payload&quot;</span><span class="token operator">:</span> <span class="token string">&quot;BASE64&quot;</span> <span class="token comment">//发送的消息</span>
<span class="token punctuation">}</span>
</code></pre></div><p>订阅数据格式:</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;payloadType&quot;</span><span class="token operator">:</span><span class="token string">&quot;BINARY&quot;</span><span class="token punctuation">,</span><span class="token comment">//消息类型</span>
    <span class="token property">&quot;payload&quot;</span><span class="token operator">:</span> <span class="token string">&quot;BASE64&quot;</span> <span class="token comment">//接收的消息</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="websocket客户端"><a href="#websocket客户端" class="header-anchor">#</a> WebSocket客户端</h2> <p>(专业版支持)</p> <p>该节点使用网络组件中的Websocket客户端进行消息订阅和发布.</p> <h3 id="websocket客户端参数说明"><a href="#websocket客户端参数说明" class="header-anchor">#</a> WebSocket客户端参数说明</h3> <table><thead><tr><th>参数</th> <th style="text-align:center;">用途</th> <th style="text-align:center;">是否必须</th> <th style="text-align:center;">用例</th></tr></thead> <tbody><tr><td>WebSocket客户端</td> <td style="text-align:center;">设置客户端基本配置</td> <td style="text-align:center;">是</td> <td style="text-align:center;">弹出框中选择</td></tr> <tr><td>操作</td> <td style="text-align:center;">定义WebSocket客户端操作类型</td> <td style="text-align:center;">是</td> <td style="text-align:center;">订阅消息</td></tr> <tr><td>消息体类型</td> <td style="text-align:center;">定义WebSocket客户端消息类型</td> <td style="text-align:center;">否</td> <td style="text-align:center;">JSON</td></tr></tbody></table> <h3 id="websocket客户端内置变量"><a href="#websocket客户端内置变量" class="header-anchor">#</a> WebSocket客户端内置变量</h3> <p>推送数据格式(由上一步传入):</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;payloadType&quot;</span><span class="token operator">:</span><span class="token string">&quot;JSON&quot;</span><span class="token punctuation">,</span><span class="token comment">//消息类型</span>
    <span class="token property">&quot;payload&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token comment">//发送的消息</span>
<span class="token punctuation">}</span>
</code></pre></div><p>订阅数据格式:</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;payloadType&quot;</span><span class="token operator">:</span><span class="token string">&quot;JSON&quot;</span><span class="token punctuation">,</span><span class="token comment">//消息类型</span>
    <span class="token property">&quot;payload&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token comment">//接收的消息</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="http客户端"><a href="#http客户端" class="header-anchor">#</a> HTTP客户端</h2> <p>(专业版支持)</p> <p>使用网络组件中的HTTP客户端发起HTTP请求</p> <h3 id="http客户端参数说明"><a href="#http客户端参数说明" class="header-anchor">#</a> HTTP客户端参数说明</h3> <table><thead><tr><th>参数</th> <th style="text-align:center;">用途</th> <th style="text-align:center;">是否必须</th> <th style="text-align:center;">用例</th></tr></thead> <tbody><tr><td>Http客户端</td> <td style="text-align:center;">设置客户端基本配置</td> <td style="text-align:center;">是</td> <td style="text-align:center;">弹出框中选择</td></tr> <tr><td>uri</td> <td style="text-align:center;">资源详细路径</td> <td style="text-align:center;">是</td> <td style="text-align:center;">/demo/user/${#data[id]}</td></tr> <tr><td>请求方式</td> <td style="text-align:center;">定义Http请求方式</td> <td style="text-align:center;">是</td> <td style="text-align:center;">GET</td></tr> <tr><td>contentType</td> <td style="text-align:center;">定义Http contentType</td> <td style="text-align:center;">是</td> <td style="text-align:center;">application/json</td></tr> <tr><td>请求消息体类型</td> <td style="text-align:center;">定义Http客户端请求体的消息类型</td> <td style="text-align:center;">是</td> <td style="text-align:center;">JSON</td></tr> <tr><td>响应消息体类型</td> <td style="text-align:center;">定义Http服务端响应的消息类型</td> <td style="text-align:center;">是</td> <td style="text-align:center;">JSON</td></tr></tbody></table> <h3 id="http客户端内置变量"><a href="#http客户端内置变量" class="header-anchor">#</a> HTTP客户端内置变量</h3> <p>请求(通过上一步传入):</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;headers&quot;</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token property">&quot;name&quot;</span><span class="token operator">:</span><span class="token string">&quot;header&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;value&quot;</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token string">&quot;value&quot;</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token property">&quot;queryParameters&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment">//URL 参数</span>
    <span class="token property">&quot;payload&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token comment">//消息体</span>
<span class="token punctuation">}</span>
</code></pre></div><p>响应:</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;payload&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment">//接收的消息</span>
    <span class="token property">&quot;payloadType&quot;</span><span class="token operator">:</span><span class="token string">&quot;JSON&quot;</span><span class="token punctuation">,</span><span class="token comment">//接收消息类型 </span>
    <span class="token property">&quot;status&quot;</span><span class="token operator">:</span><span class="token number">200</span><span class="token punctuation">,</span>
    <span class="token property">&quot;headers&quot;</span><span class="token operator">:</span><span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
            <span class="token property">&quot;name&quot;</span><span class="token operator">:</span><span class="token string">&quot;请求头名称&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;value&quot;</span><span class="token operator">:</span><span class="token punctuation">[</span>
                <span class="token string">&quot;请求头值1&quot;</span><span class="token punctuation">,</span>
                <span class="token string">&quot;请求头值2&quot;</span>
            <span class="token punctuation">]</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token property">&quot;contentType&quot;</span><span class="token operator">:</span><span class="token string">&quot;application/json&quot;</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="coap客户端"><a href="#coap客户端" class="header-anchor">#</a> CoAP客户端</h2> <p>该节点使用网络组件中的CoAP客户端进行CoAP讲求</p> <h3 id="coap客户端参数说明"><a href="#coap客户端参数说明" class="header-anchor">#</a> CoAP客户端参数说明</h3> <table><thead><tr><th>参数</th> <th style="text-align:center;">用途</th> <th style="text-align:center;">是否必须</th> <th style="text-align:center;">用例</th></tr></thead> <tbody><tr><td>CoAP客户端</td> <td style="text-align:center;">设置客户端基本配置</td> <td style="text-align:center;">是</td> <td style="text-align:center;">弹出框中选择</td></tr> <tr><td>uri</td> <td style="text-align:center;">资源详细路径</td> <td style="text-align:center;">是</td> <td style="text-align:center;">/demo/user/{id}</td></tr> <tr><td>请求方法</td> <td style="text-align:center;">定义CoAP请求方式</td> <td style="text-align:center;">是</td> <td style="text-align:center;">GET</td></tr> <tr><td>消息体类型</td> <td style="text-align:center;">定义CoAP客户端消息类型</td> <td style="text-align:center;">是</td> <td style="text-align:center;">JSON</td></tr></tbody></table> <h3 id="coap客户端内置变量"><a href="#coap客户端内置变量" class="header-anchor">#</a> CoAP客户端内置变量</h3> <p>请求参数(由上一节点传入):</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;payload&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token comment">//消息内容</span>
  <span class="token property">&quot;options&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token comment">//自定义Options</span>
  <span class="token property">&quot;payloadType&quot;</span><span class="token operator">:</span><span class="token string">&quot;JSON&quot;</span><span class="token punctuation">,</span><span class="token comment">//可选,消息体类型</span>
  <span class="token property">&quot;path&quot;</span><span class="token operator">:</span><span class="token string">&quot;&quot;</span><span class="token comment">//可选,请求路径  </span>
<span class="token punctuation">}</span>
</code></pre></div><p>响应结果:</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;payload&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span> <span class="token comment">//接收的消息</span>

    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token property">&quot;path&quot;</span><span class="token operator">:</span><span class="token string">&quot;/demo/user/{id}&quot;</span><span class="token punctuation">,</span><span class="token comment">//请求路径</span>
    <span class="token property">&quot;code&quot;</span><span class="token operator">:</span><span class="token number">200</span><span class="token punctuation">,</span> <span class="token comment">//响应状态码</span>
    <span class="token property">&quot;options&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token comment">//options</span>
    <span class="token property">&quot;success&quot;</span><span class="token operator">:</span><span class="token boolean">true</span> <span class="token comment">//响应结果</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="执行sql"><a href="#执行sql" class="header-anchor">#</a> 执行SQL</h2> <p>该节点执行SQL语句.</p> <h3 id="执行sql配置项"><a href="#执行sql配置项" class="header-anchor">#</a> 执行SQL配置项</h3> <table><thead><tr><th>参数</th> <th style="text-align:center;">用途</th> <th style="text-align:center;">是否必须</th> <th style="text-align:center;">用例</th></tr></thead> <tbody><tr><td>sql</td> <td style="text-align:center;">定义所选择数据源支持的sql语句</td> <td style="text-align:center;">是</td> <td style="text-align:center;">select 1</td></tr></tbody></table> <h3 id="执行sql说明"><a href="#执行sql说明" class="header-anchor">#</a> 执行SQL说明</h3> <p>当sql为查询时,查询的每一条结果都会被传入下一个节点.而不是传入整个结果集.</p> <h2 id="字段转换"><a href="#字段转换" class="header-anchor">#</a> 字段转换</h2> <p>该节点可转换数据的字段。如 source：a=1  target:b=1</p> <h3 id="字段转换配置项"><a href="#字段转换配置项" class="header-anchor">#</a> 字段转换配置项</h3> <table><thead><tr><th>参数</th> <th style="text-align:center;">用途</th> <th style="text-align:center;">是否必须</th> <th style="text-align:center;">用例</th></tr></thead> <tbody><tr><td>保留源字段</td> <td style="text-align:center;">源字段是否保留在转换结果中</td> <td style="text-align:center;">否</td> <td style="text-align:center;">是</td></tr> <tr><td>转换规则</td> <td style="text-align:center;">配置转换方式</td> <td style="text-align:center;">否</td> <td style="text-align:center;"></td></tr></tbody></table> <ol><li>单击转换规则</li> <li>在弹出框中，单击添加字段</li> <li>输入原字段、目标字段、类型
<ul><li>原字段：需要转换的字段</li> <li>目标字段：转换后生成的字段</li> <li>字段类型： 该字段的数据类型</li></ul></li> <li>点击保存生成字段转换配置</li></ol> <div class="custom-block tip"><p class="custom-block-title">注意</p> <p>源字段支持SpEL表达式</p></div> <h2 id="动态脚本"><a href="#动态脚本" class="header-anchor">#</a> 动态脚本</h2> <p>该节点可执行脚本,通过脚本进行一些自定义的逻辑.</p> <h3 id="动态脚本配置项"><a href="#动态脚本配置项" class="header-anchor">#</a> 动态脚本配置项</h3> <table><thead><tr><th>参数</th> <th style="text-align:center;">用途</th> <th style="text-align:center;">是否必须</th> <th style="text-align:center;">用例</th></tr></thead> <tbody><tr><td>脚本语言</td> <td style="text-align:center;">定于将要执行的脚本语言类型</td> <td style="text-align:center;">是</td> <td style="text-align:center;">javascript</td></tr> <tr><td>脚本</td> <td style="text-align:center;">定于将要执行的脚本</td> <td style="text-align:center;">是</td> <td style="text-align:center;"></td></tr></tbody></table> <h4 id="脚本案例"><a href="#脚本案例" class="header-anchor">#</a> 脚本案例</h4> <p>javascrpt:</p> <div class="language-js extra-class"><pre class="language-js"><code>
handler<span class="token punctuation">.</span><span class="token function">onMessage</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">ruleData</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">var</span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">java<span class="token punctuation">.</span>utils<span class="token punctuation">.</span>HashMap</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;payload&quot;</span><span class="token operator">:</span><span class="token string">&quot;hello js&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> map<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><p>groovy:</p> <div class="language-groovy extra-class"><pre class="language-groovy"><code>handler<span class="token punctuation">.</span><span class="token function">onMessage</span><span class="token punctuation">(</span><span class="token punctuation">{</span> ruleData <span class="token operator">-&gt;</span>
     <span class="token keyword">return</span> <span class="token punctuation">[</span>
        <span class="token string gstring">&quot;messageType&quot;</span><span class="token punctuation">:</span><span class="token string gstring">&quot;READ_PROPERTY_REPLY&quot;</span><span class="token punctuation">,</span>
        <span class="token string gstring">&quot;deviceId&quot;</span><span class="token punctuation">:</span>ruleData<span class="token punctuation">.</span>data<span class="token punctuation">.</span>payload<span class="token punctuation">.</span>deviceId<span class="token punctuation">,</span>
        <span class="token string gstring">&quot;messageId&quot;</span><span class="token punctuation">:</span>ruleData<span class="token punctuation">.</span>data<span class="token punctuation">.</span>payload<span class="token punctuation">.</span>messageId<span class="token punctuation">,</span>
        <span class="token string gstring">&quot;success&quot;</span><span class="token punctuation">:</span><span class="token boolean">true</span><span class="token punctuation">,</span>
        <span class="token string gstring">&quot;properties&quot;</span><span class="token punctuation">:</span><span class="token punctuation">[</span>name<span class="token punctuation">:</span><span class="token string gstring">&quot;test&quot;</span><span class="token punctuation">]</span>
    <span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.dc7074e4.js" defer></script><script src="/assets/js/2.910fdf72.js" defer></script><script src="/assets/js/39.33750cb1.js" defer></script>
  </body>
</html>
